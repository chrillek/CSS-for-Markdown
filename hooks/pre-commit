#/usr/bin/env /bin/zsh

startDir="/Users/ck/Develop/websites"
mdDir="CSS-for-Markdown"
archive="$mdDir/Using CSS.zip"
mdFile="$mdDir/Using CSS.md"
cssFile="$mdDir/styles.css"
(cd $startDir; rm "$archive"; find $mdDir -name "*.png" -print0 | xargs -0 zip "$archive" ; zip "$archive" "$mdFile" "$cssFile")

cp $archive /tmp
cd /tmp 
unzip "Using CSS.zip"
rm "Using CSS.zip"

# The archive is unpacked in /tmp/CSS-for-Markdown now

# Now the archive is ready. Build the PDF from it using DEVONthink
## Doesn't work yet due to a bug in DT's JXA binding

# osascript -l JavaScript "$startDir/$mdDir/buildPDF.js" /tmp/Markdown-for-CSS "Using CSS.md" "$startDir/$mdDir"